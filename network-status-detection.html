<link rel="import" href="../polymer/polymer.html">

<!--
`network-status-detection`
a web component helps you detect network status easily

## Use with Polymer

```
<network-status-detection
  isOnline="{{isOnline}}"></network-status-detection>


<template is="dom-if" if="[[!isOnline]]">
  <div>U r offline</div>
</template>
```

@demo demo/index.html
-->

<dom-module id="network-status-detection">
  <template>

  </template>

  <script>
    Polymer({

      is: 'network-status-detection',

      properties: {
        isOnline: {
          notify: true
        }
      },

      attached() {
        if(navigator.onLine) {
          this.isOnline = true;
        } else {
          this.isOnline = false;
        }

        // es6 way of doing this
        // safari 9 doesn't support it
        // window.addEventListener('online', () => this.isOnline = true);
        // window.addEventListener('offline', () => this.isOnline = false);

        window.addEventListener('online', function() {
          this.isOnline = true;
        }.bind(this));
        window.addEventListener('offline', function() {
          this.isOnline = false;
        }.bind(this));
      }

    });
  </script>
</dom-module>
